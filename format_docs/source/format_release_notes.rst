Release Notes: NWB Format
=========================

1.1.0a, May 2017
----------------

**``#TODO Need to describe the changes made in the new version of the format``**

- Format specification now released via YAML (rather than via Python .py files)
- Converted all documentation documents to Sphinx reStructuredText files to ease portability and maintainability

1.0.5g\_beta, Oct 7, 2016
-------------------------

-  Replace group options: ``autogen: {"type": "create"}`` and ``"closed": True``
   with ``"\_properties": {"create": True}`` and ``"\_properties": {"closed": True}``.
   This was done to make the specification language more consistent by
   having these group properties specified in one place (``"\_properties"``
   dictionary).


1.0.5f\_beta, Oct 3, 2016
-------------------------

-  Minor fixes to allow validation of schema using json-schema specification
   in file ``meta-schema.py`` using utility ``check\_schema.py``.


1.0.5e\_beta, Sept 22, 2016
---------------------------

-  Moved definition of ``<Module>/`` out of /processing group to allow creating subclasses of Module.
   This is useful for making custom Module types that specified required interfaces. Example of this
   is in ``python-api/examples/create\_scripts/module-e.py`` and the extension it uses (``extensions/e-module.py``).
-  Fixed malformed html in ``nwb\_core.py`` documentation.
-  Changed html generated by ``doc\_tools.py`` to html5 and fixed so passes validation at https://validator.w3.org.


1.0.5d\_beta, Sept 6, 2016
--------------------------

- Changed ImageSeries img\_mask dimensions to: ``"dimensions": ["num\_y","num\_x"]`` to match description.

1.0.5c\_beta, Aug 17, 2016
--------------------------

- Change IndexSeries to allow linking to any form of TimeSeries, not just an ``ImageSeries``


1.0.5b\_beta, Aug 16, 2016
--------------------------

-  Make ``'manifold'`` and ``'reference\_frame'`` (under
   ``/general/optophysiology``) recommended rather than required.
-  In all cases, allow subclasses of a TimeSeries to fulfill validation
   requirements when an instance of TimeSeries is required.
-  Change unit attributes in ``VoltageClampSeries`` series datasets from
   required to recommended.
-  Remove ``'const'=True`` from ``TimeSeries`` attributes in ``AnnotationSeries``
   and ``IntervalSeries``.
-  Allow the base ``TimeSeries`` class to store multi-dimensional arrays in
   ``'data'``. A user is expected to describe the contents of 'data' in the
   comments and/or description fields.


1.0.5a\_beta, Aug 10, 2016
--------------------------

Expand class of Ids allowed in ``TimeSeries`` ``missing\_fields`` attribute to
allow custom uses.


1.0.5\_beta Aug 2016
--------------------

-  Allow subclasses to be used for merges instead of base class
   (specified by ``'merge+'`` in format specification file).
-  Use ``'neurodata\_type=Custom'`` to flag additions that are not describe
   by a schema.
-  Exclude TimeSeries timestamps and starting time from under
   ``/stimulus/templates``


1.0.4\_beta June 2016
---------------------

- Generate documentation directly from format specification file."
- Change ImageSeries ``external\_file`` to an array.
- Made TimeSeries description and comments recommended.

1.0.3 April, 2016
-----------------

- Renamed ``"ISI\_Retinotopy"`` to ``"ISIRetinotopy"``
- Change ``ImageSeries`` ``external\_file`` to an array. Added attribute ``starting\_frame``.
- Added ``IZeroClampSeries``.


1.0.2 February, 2016
--------------------

-  Fixed documentation error, updating ``'neurodata\_version'`` to ``'nwb\_version'``
-  Created ``ISI\_Retinotopy`` interface
-  In ``ImageSegmentation`` module, moved ``pix\_mask::weight`` attribute to be its
   own dataset, named ``pix\_mask\_weight``. Attribute proved inadequate for
   storing sufficiently large array data for some segments
-  Moved ``'gain'`` field from ``Current/VoltageClampSeries`` to parent
   ``PatchClampSeries``, due need of stimuli to sometimes store gain
-  Added Ken Harris to the Acknowledgements section


1.0.1 October 7th, 2015
-----------------------

-  Added ``'required'`` field to tables in the documentation, to indicate if
   ``group/dataset/attribute`` is required, standard or optional
-  Obsoleted ``'file\_create\_date'`` attribute ``'modification\_time'`` and made ``file\_create\_date`` a text array
-  Removed ``'resistance\_compensation'`` from ``CurrentClampSeries`` due being duplicate of another field
-  Upgraded ``TwoPhotonSeries::imaging\_plane`` to be a required value
-  Removed ``'tags'`` attribute to group 'epochs' as it was fully redundant with the ``'epoch/tags'`` dataset
-  Added text to the documentation stating that specified sizes for integer
   values are recommended sizes, while sizes for floats are minimum sizes
-  Added text to the documentation stating that, if the
   ``TimeSeries::data::resolution`` attribute value is unknown then store a ``NaN``
-  Declaring the following groups as required (this was implicit before)

.. code-block:: python

    acquisition/

    \_ images/

    \_ timeseries/

    analysis/

    epochs/

    general/

    processing/

    stimulus/

    \_ presentation/

    \_ templates/


This is to ensure consistency between ``.nwb`` files, to provide a minimum
expected structure, and to avoid confusion by having someone expect time
series to be in places they're not. I.e., if ``'acquisition/timeseries'`` is
not present, someone might reasonably expect that acquisition time
series might reside in ``'acquisition/'``. It is also a subtle reminder
about what the file is designed to store, a sort of built-in
documentation. Subfolders in ``'general/'`` are only to be included as
needed. Scanning ``'general/'`` should provide the user a quick idea what
the experiment is about, so only domain-relevant subfolders should be
present (e.g., ``'optogenetics'`` and ``'optophysiology'``). There should always
be a ``'general/devices'``, but it doesn't seem worth making it mandatory
without making all subfolders mandatory here.


1.0.0 September 28\ :sup:`th`, 2015
-----------------------------------

- Convert document to .html
- ``TwoPhotonSeries::imaging\_plane`` was upgraded to mandatory to help
  enforce inclusion of important metadata in the file.

