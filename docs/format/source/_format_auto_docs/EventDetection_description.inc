.. _sec-EventDetection:

EventDetection
^^^^^^^^^^^^^^

**Extends:** :ref:`NWBContainer <sec-NWBContainer>`

**Source Specification:** see :numref:`sec-EventDetection-src`

**Overview:** Detected spike events from voltage trace(s).


``EventDetection`` extends ``NWBContainer`` (see :numref:`sec-NWBContainer`) and includes all elements of :ref:`NWBContainer <sec-NWBContainer>` with the following additions or changes.



.. figure:: ./_format_auto_docs/EventDetection.*
    :alt: EventDetection




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-EventDetection-data:

.. table:: Datasets, Links, and Attributes contained in <EventDetection>
    :class: longtable

    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id                         | Type        | Description                                                                                                                                                                                                                                                                             |
    +============================+=============+=========================================================================================================================================================================================================================================================================================+
    | EventDetection             | group       | Top level group for EventDetection                                                                                                                                                                                                                                                      |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .help                      | attribute   | Value is 'Detected spike events from voltage trace(s)'                                                                                                                                                                                                                                  |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Data Type:** text                                                                                                                                                                                                                                                                   |
    |                            |             | - **Value:** Detected spike events from voltage trace(s)                                                                                                                                                                                                                                |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .detection_method          | dataset     | Description of how events were detected, such as voltage threshold, or dV/dT threshold, as well as relevant values.                                                                                                                                                                     |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Data Type:** text                                                                                                                                                                                                                                                                   |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .source_idx                | dataset     | Indices (zero-based) into source ElectricalSeries::data array corresponding to time of event. Module description should define what is meant by time of event (e.g., .25msec before action potential peak, zero-crossing time, etc). The index points to each event from the raw data   |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Data Type:** int32                                                                                                                                                                                                                                                                  |
    |                            |             | - **Dimensions:** ['num_events']                                                                                                                                                                                                                                                        |
    |                            |             | - **Shape:** [None]                                                                                                                                                                                                                                                                     |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .times                     | dataset     | Timestamps of events, in Seconds                                                                                                                                                                                                                                                        |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Data Type:** float64!                                                                                                                                                                                                                                                               |
    |                            |             | - **Dimensions:** ['num_events']                                                                                                                                                                                                                                                        |
    |                            |             | - **Shape:** [None]                                                                                                                                                                                                                                                                     |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..unit                     | attribute   | The string "Seconds"                                                                                                                                                                                                                                                                    |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Data Type:** text                                                                                                                                                                                                                                                                   |
    |                            |             | - **Reuqired:** False                                                                                                                                                                                                                                                                   |
    |                            |             | - **Default Value:** Seconds                                                                                                                                                                                                                                                            |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .source_electricalseries   | link        | HDF5 link to ElectricalSeries that this data was calculated from. Metadata about electrodes and their position can be read from that ElectricalSeries so it's not necessary to mandate that information be stored here                                                                  |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    |                            |             | - **Target Type** :ref:`ElectricalSeries <sec-ElectricalSeries>`                                                                                                                                                                                                                        |
    |                            |             |                                                                                                                                                                                                                                                                                         |
    +----------------------------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-EventDetection-groups:

.. table:: Groups contained in <EventDetection>
    :class: longtable

    +----------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id                         | Type    | Description                                                                                                                                                                                                              |
    +============================+=========+==========================================================================================================================================================================================================================+
    | EventDetection             | group   | Top level group for EventDetection                                                                                                                                                                                       |
    +----------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .source_electricalseries   | link    | HDF5 link to ElectricalSeries that this data was calculated from. Metadata about electrodes and their position can be read from that ElectricalSeries so it's not necessary to mandate that information be stored here   |
    |                            |         |                                                                                                                                                                                                                          |
    |                            |         | - **Target Type** :ref:`ElectricalSeries <sec-ElectricalSeries>`                                                                                                                                                         |
    |                            |         |                                                                                                                                                                                                                          |
    +----------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


