.. _sec-ImageSeries:

ImageSeries
^^^^^^^^^^^

**Extends:** :ref:`TimeSeries <sec-TimeSeries>`

**Source Specification:** see :numref:`sec-ImageSeries-src`

**Overview:** General image data that is common between acquisition and stimulus time series. Sometimes the image data is stored in the HDF5 file in a raw format while other times it will be stored as an external image file in the host file system. The data field will either be binary data or empty. TimeSeries::data array structure: [frame] [y][x] or [frame][z][y][x].


``ImageSeries`` extends ``TimeSeries`` (see :numref:`sec-TimeSeries`) and includes all elements of :ref:`TimeSeries <sec-TimeSeries>` with the following additions or changes.



.. figure:: ./_format_auto_docs/ImageSeries.*
    :alt: ImageSeries




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-ImageSeries-data:

.. table:: Datasets, Links, and Attributes contained in <ImageSeries>
    :class: longtable

    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id                 | Type        | Description                                                                                                                                                                                                                                                                                                                                       |
    +====================+=============+===================================================================================================================================================================================================================================================================================================================================================+
    | <ImageSeries>      | group       | Top level group for <ImageSeries>                                                                                                                                                                                                                                                                                                                 |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Extends:** :ref:`TimeSeries <sec-TimeSeries>`                                                                                                                                                                                                                                                                                                 |
    |                    |             | - **Neurodata Type:** :ref:`ImageSeries <sec-ImageSeries>`                                                                                                                                                                                                                                                                                        |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .help              | attribute   | Value is 'Storage object for time-series 2-D image data'                                                                                                                                                                                                                                                                                          |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Data Type:** text                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Value:** Storage object for time-series 2-D image data                                                                                                                                                                                                                                                                                        |
    |                    |             | - **Name:** help                                                                                                                                                                                                                                                                                                                                  |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .bits_per_pixel    | dataset     | Number of bit per image pixel.                                                                                                                                                                                                                                                                                                                    |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Quantity** 0 or 1                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Data Type:** int32                                                                                                                                                                                                                                                                                                                            |
    |                    |             | - **Name:** bits_per_pixel                                                                                                                                                                                                                                                                                                                        |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .data              | dataset     | Either binary data containing image or empty.                                                                                                                                                                                                                                                                                                     |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Data Type:** number                                                                                                                                                                                                                                                                                                                           |
    |                    |             | - **Dimensions:** [['x', 'y'], ['frame', 'y', 'x'], ['frame', 'z', 'y', 'x']]                                                                                                                                                                                                                                                                     |
    |                    |             | - **Shape:** [[None, None], [None, None, None], [None, None, None, None]]                                                                                                                                                                                                                                                                         |
    |                    |             | - **Name:** data                                                                                                                                                                                                                                                                                                                                  |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .dimension         | dataset     | Number of pixels on x, y, (and z) axes.                                                                                                                                                                                                                                                                                                           |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Quantity** 0 or 1                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Data Type:** int32                                                                                                                                                                                                                                                                                                                            |
    |                    |             | - **Dimensions:** ['rank']                                                                                                                                                                                                                                                                                                                        |
    |                    |             | - **Shape:** [None]                                                                                                                                                                                                                                                                                                                               |
    |                    |             | - **Name:** dimension                                                                                                                                                                                                                                                                                                                             |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .external_file     | dataset     | Path or URL to one or more external file(s). Field only present if format=external.                                                                                                                                                                                                                                                               |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             |  **Additional Information:**  this is only relevant if the image is stored in the file system as one or more image file(s). This field should NOT be used if the image is stored in another HDF5 file and that file is HDF5 linked to this file.                                                                                                  |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Quantity** 0 or 1                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Data Type:** text                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Dimensions:** ['num_files']                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Shape:** [None]                                                                                                                                                                                                                                                                                                                               |
    |                    |             | - **Name:** external_file                                                                                                                                                                                                                                                                                                                         |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..starting_frame   | attribute   | Each entry is the frame number (within the full ImageSeries) of the first frame in the corresponding external_file entry. This serves as an index to what frames each file contains, allowing random access.Zero-based indexing is used.  (The first element will always be zero).                                                                |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Data Type:** int                                                                                                                                                                                                                                                                                                                              |
    |                    |             | - **Dimensions:** ['num_files']                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Shape:** (None,)                                                                                                                                                                                                                                                                                                                              |
    |                    |             | - **Name:** starting_frame                                                                                                                                                                                                                                                                                                                        |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .format            | dataset     | Format of image. If this is 'external' then the field external_file contains the path or URL information to that file. For tiff, png, jpg, etc, the binary representation of the image is stored in data. If the format is raw then the fields bit_per_pixel and dimension are used. For raw images, only a single channel is stored (eg, red).   |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    |                    |             | - **Quantity** 0 or 1                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Data Type:** text                                                                                                                                                                                                                                                                                                                             |
    |                    |             | - **Name:** format                                                                                                                                                                                                                                                                                                                                |
    |                    |             |                                                                                                                                                                                                                                                                                                                                                   |
    +--------------------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+



