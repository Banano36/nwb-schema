.. _sec-TimeSeries:

TimeSeries
^^^^^^^^^^

**Source Specification:** see :numref:`sec-TimeSeries-src`

**Overview:** General purpose time series.




.. figure:: ./_format_auto_docs/TimeSeries.*
    :alt: TimeSeries




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-TimeSeries-data:

.. table:: Datasets, Links, and Attributes contained in <TimeSeries>
    :class: longtable

    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id                     | Type        | Description                                                                                                                                                                                                                          |
    +========================+=============+======================================================================================================================================================================================================================================+
    | <TimeSeries>           | group       | Top level group for <TimeSeries>                                                                                                                                                                                                     |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .timestamp_link        | attribute   | A sorted list of the paths of all TimeSeries that share a link to the same timestamps field.  Example element of list: "/acquisition/timeseries/lick_trace"                                                                          |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Attribute is only present if links are present. List should include the path to this TimeSeries also.                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Dimensions:** ['num_tslinks']                                                                                                                                                                                                    |
    |                        |             | - **Shape:** (None,)                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .missing_fields        | attribute   | List of fields that are not optional (i.e. either required or recommended parts of the TimeSeries) that are missing.                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Only present if one or more required or recommended fields are missing. Note that a missing required field (such as data or timestamps) should generate an error by the API                                            |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Dimensions:** ['num_missing_fields']                                                                                                                                                                                             |
    |                        |             | - **Shape:** (None,)                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .data_link             | attribute   | A sorted list of the paths of all TimeSeries that share a link to the same data field. Example element of list: "/stimulus/presentation/Sweep_0"`                                                                                    |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Attribute is only present if links are present. List should include the path to this TimeSeries also.                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Dimensions:** ['num_dlinks']                                                                                                                                                                                                     |
    |                        |             | - **Shape:** (None,)                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .ancestry              | attribute   | Value is 'TimeSeries'                                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Value:** TimeSeries                                                                                                                                                                                                              |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .comments              | attribute   | Human-readable comments about the TimeSeries. This second descriptive field can be used to store additional information, or descriptive information if the primary description field is populated with a computer-readable string.   |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .source                | attribute   | Name of TimeSeries or Modules that serve as the source for the data contained here. It can also be the name of a device, for stimulus or acquisition data                                                                            |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .description           | attribute   | Description of TimeSeries                                                                                                                                                                                                            |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .help                  | attribute   | Value is 'General time series object'                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Value:** General time series object                                                                                                                                                                                              |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .extern_fields         | attribute   | List of fields that are HDF5 external links.                                                                                                                                                                                         |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Only present if one or more datasets is set to an HDF5 external link.                                                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Dimensions:** ['num_extern_fields']                                                                                                                                                                                              |
    |                        |             | - **Shape:** (None,)                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .starting_time         | dataset     | The timestamp of the first sample.                                                                                                                                                                                                   |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  When timestamps are uniformly spaced, the timestamp of the first sample can be specified and all subsequent ones calculated from the sampling rate.                                                                    |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Quantity** 0 or 1                                                                                                                                                                                                                |
    |                        |             | - **Data Type:** float64!                                                                                                                                                                                                            |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..rate                 | attribute   | Sampling rate, in Hz                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Rate information is stored in Hz                                                                                                                                                                                       |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** float32!                                                                                                                                                                                                            |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..unit                 | attribute   | Value is 'Seconds'                                                                                                                                                                                                                   |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Value:** Seconds                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .timestamps            | dataset     | Timestamps for samples stored in data.                                                                                                                                                                                               |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Timestamps here have all been corrected to the common experiment master-clock. Time is stored as seconds and all timestamps are relative to experiment start time.                                                     |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** float64!                                                                                                                                                                                                            |
    |                        |             | - **Dimensions:** ['num_times']                                                                                                                                                                                                      |
    |                        |             | - **Shape:** [None]                                                                                                                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..interval             | attribute   | Value is '1'                                                                                                                                                                                                                         |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** int32                                                                                                                                                                                                               |
    |                        |             | - **Value:** 1                                                                                                                                                                                                                       |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..unit                 | attribute   | Value is 'Seconds'                                                                                                                                                                                                                   |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Value:** Seconds                                                                                                                                                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .control_description   | dataset     | Description of each control value.                                                                                                                                                                                                   |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Array length should be as long as the highest number in control minus one, generating an zero-based indexed array for control values.                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Quantity** 0 or 1                                                                                                                                                                                                                |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             | - **Dimensions:** ['num_control_values']                                                                                                                                                                                             |
    |                        |             | - **Shape:** [None]                                                                                                                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .data                  | dataset     | Data values. Can also store binary data (eg, image frames)                                                                                                                                                                           |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  This field may be a link to data stored in an external file, especially in the case of raw data.                                                                                                                       |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** any                                                                                                                                                                                                                 |
    |                        |             | - **Dimensions:** ['num_times']                                                                                                                                                                                                      |
    |                        |             | - **Shape:** [None]                                                                                                                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..conversion           | attribute   | Scalar to multiply each element in data to convert it to the specified unit                                                                                                                                                          |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** float32!                                                                                                                                                                                                            |
    |                        |             | - **Default Value:** 1.0                                                                                                                                                                                                             |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..unit                 | attribute   | The base unit of measure used to store data. This should be in the SI unit.                                                                                                                                                          |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  This is the SI unit (when appropriate) of the stored data, such as Volts. If the actual data is stored in millivolts, the field 'conversion' below describes how to convert the data to the specified SI unit.         |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** text                                                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | ..resolution           | attribute   | Smallest meaningful difference between values in data, stored in the specified by unit.                                                                                                                                              |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  E.g., the change in value of the least significant bit, or a larger number if signal noise is known to be present. If unknown, use NaN                                                                                 |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** float32!                                                                                                                                                                                                            |
    |                        |             | - **Default Value:** 0.0                                                                                                                                                                                                             |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .control               | dataset     | Numerical labels that apply to each element in data[].                                                                                                                                                                               |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  Optional field. If present, the control array should have the same number of elements as data[].                                                                                                                       |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Quantity** 0 or 1                                                                                                                                                                                                                |
    |                        |             | - **Data Type:** uint8                                                                                                                                                                                                               |
    |                        |             | - **Dimensions:** ['num_times']                                                                                                                                                                                                      |
    |                        |             | - **Shape:** [None]                                                                                                                                                                                                                  |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .num_samples           | dataset     | Number of samples in data, or number of image frames.                                                                                                                                                                                |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | **Comment:**  This is important if the length of timestamp and data are different, such as for externally stored stimulus image stacks                                                                                               |
    |                        |             |                                                                                                                                                                                                                                      |
    |                        |             | - **Data Type:** int32                                                                                                                                                                                                               |
    |                        |             |                                                                                                                                                                                                                                      |
    +------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+




.. tabularcolumns:: |p{4cm}|p{1cm}|p{10cm}|
.. _table-TimeSeries-groups:

.. table:: Groups contained in <TimeSeries>
    :class: longtable

    +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Id             | Type    | Description                                                                                                                                                                                                                              |
    +================+=========+==========================================================================================================================================================================================================================================+
    | <TimeSeries>   | group   | Top level group for <TimeSeries>                                                                                                                                                                                                         |
    +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | .sync          | group   | Lab specific time and sync information as provided directly from hardware devices and that is necessary for aligning all acquired time information to a common timebase. The timestamp array stores time in the common timebase.         |
    |                |         |                                                                                                                                                                                                                                          |
    |                |         | **Comment:**  This group will usually only be populated in TimeSeries that are stored external to the NWB file, in files storing raw data. Once timestamp data is calculated, the contents of 'sync' are mostly for archival purposes.   |
    |                |         |                                                                                                                                                                                                                                          |
    |                |         | - **Quantity** 0 or 1                                                                                                                                                                                                                    |
    |                |         |                                                                                                                                                                                                                                          |
    +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


Groups: sync
""""""""""""

Lab specific time and sync information as provided directly from hardware devices and that is necessary for aligning all acquired time information to a common timebase. The timestamp array stores time in the common timebase. 

**Comment:**  This group will usually only be populated in TimeSeries that are stored external to the NWB file, in files storing raw data. Once timestamp data is calculated, the contents of 'sync' are mostly for archival purposes.



- **Quantity** 0 or 1

